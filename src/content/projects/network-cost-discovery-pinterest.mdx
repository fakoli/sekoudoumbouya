---
title: 'Network Cost Discovery & Remediation'
slug: network-cost-discovery-pinterest
publishDate: '2024-06-15'
description: 'Discovered unmonitored Transit Gateway driving excessive costs and implemented same-region VPC peering, delivering multi-million dollar annual savings overnight.'
category: strategic
role: 'Tech Lead'
organization: Pinterest
impactSummary: 'Identified an unmonitored Transit Gateway configuration responsible for excessive infrastructure costs, then executed an overnight architectural change to VPC peering that eliminated the expense entirely.'
scale:
  - Multi-region architecture
  - Production VPC environment
  - Zero production downtime
primaryTech:
  - AWS VPC Peering
  - Transit Gateway
  - CloudWatch
  - Cost Explorer
contributions:
  - Investigated unmonitored Transit Gateway infrastructure
  - Identified anomalous traffic patterns driving excessive costs
  - Diagnosed root cause as inappropriate TGW usage for same-region streaming
  - Executed overnight cutover from TGW to VPC peering
  - Documented findings and established monitoring for future visibility
outcomes:
  - 'Multi-million dollar annual infrastructure cost reduction'
  - 'Zero production downtime during cutover'
  - 'Eliminated unnecessary cross-region data transfer charges'
tags:
  - aws
  - networking
  - cost-optimization
  - infrastructure
duration: '2023'
featured: true
confidential: true

# Decision Card - Structured thinking summary
decisionCard:
  problem: 'Transit Gateway infrastructure was completely unmonitored. After investigation, I discovered one TGW configuration was significantly larger than others due to a system streaming large data volumes over TGW—a pattern TGW was never designed for, especially within the same region where VPC peering has no data transfer charges.'
  constraints:
    - 'Zero production downtime tolerance'
    - 'Change must be reversible if issues emerge'
    - 'Cannot require application-level changes'
    - 'Same-region traffic—VPC peering is the appropriate pattern'
  tradeoffs:
    - option: 'Switch to VPC Peering (same region)'
      pros:
        - 'Eliminates per-GB Transit Gateway charges entirely'
        - 'Lower latency (removes TGW hop)'
        - 'Correct architectural pattern for same-region traffic'
      cons:
        - 'Requires route table updates'
        - 'One-time cutover risk'
      chosen: true
    - option: 'Keep Transit Gateway and negotiate pricing'
      pros:
        - 'No migration risk'
        - 'Familiar operational model'
      cons:
        - 'AWS pricing is non-negotiable'
        - 'TGW is the wrong pattern for same-region streaming'
        - 'Costs continue scaling with traffic'
      chosen: false
    - option: 'Gradual traffic migration'
      pros:
        - 'Lower risk profile'
        - 'Time to validate'
      cons:
        - 'Delays cost savings unnecessarily'
        - 'Same-region change is straightforward'
        - 'Overengineered for the problem'
      chosen: false
---

## Context

When I joined the Cloud Infrastructure team, I inherited Transit Gateway infrastructure that had no monitoring in place. Nobody knew what traffic was flowing through TGW, what it cost, or whether the architectural patterns were appropriate.

This is a common problem in large-scale cloud environments: infrastructure gets provisioned, traffic flows, and the monthly bill arrives—but without visibility into *why* costs are what they are.

## The Discovery

I started by instrumenting the Transit Gateway with basic monitoring—something that should have existed from day one. Once I had visibility, the data told an interesting story.

Looking at traffic patterns across TGW configurations, one stood out immediately: it was handling significantly more traffic than the others. Not a small difference—this was an anomaly worth investigating.

Digging deeper, I traced the traffic to a system that was streaming large volumes of data between VPCs. The source and destination were in the **same region**.

This was the root cause. Transit Gateway charges per-GB for data processed. VPC peering within the same region has no data transfer charges. Someone had architected this data streaming to flow through TGW when it didn't need to—and nobody had caught it because there was no monitoring.

## The Decision

The fix was obvious once I understood the problem. For same-region traffic, especially high-volume streaming, VPC peering is the correct pattern:

- **No per-GB charges** — VPC peering within the same region is free for data transfer
- **Lower latency** — Direct path without the TGW hop
- **Simpler architecture** — Fewer moving parts for this traffic pattern

Transit Gateway is the right choice for complex multi-region routing, transitive connectivity, or when you need centralized security policies. It's the wrong choice for high-volume same-region streaming where the source and destination can peer directly.

## Execution

With a clear diagnosis, the fix was straightforward:

1. **Established VPC peering** between the Prod-Data VPC and its destination
2. **Updated route tables** to direct the streaming traffic through the peering connection
3. **Validated connectivity** in a maintenance window
4. **Cutover** — swapped the routes in a single change
5. **Monitored** — confirmed traffic flowing through peering, TGW traffic dropped to expected baseline

The change happened overnight. Total execution time was measured in hours, not months.

## Results

- **Multi-million dollar annual savings** — The per-GB charges on this traffic were substantial
- **Zero production incidents** — The cutover was clean
- **Improved latency** — Removed unnecessary network hop for this traffic

## Key Learnings

**Monitor everything, especially costs.** The root cause here wasn't a technical mistake—it was a visibility problem. With monitoring in place from day one, this misconfiguration would have been caught immediately.

**Question inherited architecture.** Just because something is running doesn't mean it's running correctly. Inherited infrastructure deserves scrutiny, especially when costs seem high.

**Right-size the solution.** Not every infrastructure change requires a 9-month phased migration. When the diagnosis is clear and the fix is straightforward, just fix it.

**TGW has a purpose—and limits.** Transit Gateway is excellent for its intended use cases. Using it as a general-purpose traffic hub ignores both its cost model and its architecture. Same-region traffic between VPCs that can peer directly should peer directly.
