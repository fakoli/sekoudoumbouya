---
title: 'Next-Gen Network Architecture'
slug: next-gen-network-pinterest
publishDate: '2025-06-15'
description: 'Designed and delivered Pinterest''s foundational network architecture for scale, implementing IPAM, centralized egress, and VPC visibility tooling.'
category: strategic
role: 'Tech Lead'
organization: Pinterest
impactSummary: 'Spearheaded the Next-Gen Network Architecture initiative, delivering foundational infrastructure components one month ahead of schedule to support Pinterest''s growth toward billion-scale MAU.'
scale:
  - Multi-region architecture
  - ~30% network growth capacity
  - Petabyte-scale data operations
  - Billion MAU target
primaryTech:
  - AWS IPAM
  - VPC
  - Terraform
  - Centralized Egress
  - Network Visibility Tooling
  - Shared Network Design
  - Hub Account Architecture
contributions:
  - Designed and implemented AWS IPAM to prevent IP exhaustion
  - Built VPC visibility tooling for operational insight
  - Led centralized egress redesign for cost optimization
  - Created foundational network patterns for Pinterest infrastructure
  - Architected centralized network hub account as single source of truth
  - Built provisioning automation via Terraform modules encoding best practices
  - Mentored engineers on network architecture patterns
outcomes:
  - 'Delivered one month ahead of schedule'
  - '$800K projected annual savings from egress redesign'
  - 'Supported ~30% network growth capacity'
  - 'Reduced IP exhaustion risk through IPAM adoption'
tags:
  - aws
  - networking
  - infrastructure
  - ipam
  - cost-optimization
duration: '2024-Q4 to 2025-Q2'
featured: true
confidential: true

# Decision Card - Structured thinking summary
decisionCard:
  problem: 'Pinterest''s growth toward a billion MAU required foundational network infrastructure that could scale. The existing architecture faced three critical risks: IP address exhaustion without proper management, uncontrolled egress costs, and limited visibility into network configuration across the fleet.'
  constraints:
    - 'Must support ~30% network growth without architectural changes'
    - 'Cannot disrupt existing production workloads'
    - 'Infrastructure patterns must be adoptable by service teams'
    - 'Must deliver within Q2 2025 timeline'
  tradeoffs:
    - option: 'AWS IPAM for IP management'
      pros:
        - 'Native AWS integration'
        - 'Automated CIDR allocation prevents conflicts'
        - 'Visibility into IP utilization across accounts'
      cons:
        - 'Requires migration of existing allocation patterns'
        - 'Learning curve for teams'
      chosen: true
    - option: 'Centralized egress architecture'
      pros:
        - 'Consolidates NAT Gateway costs'
        - 'Consistent security posture for outbound traffic'
        - 'Easier to monitor and audit'
      cons:
        - 'Single point for egress traffic'
        - 'Requires route table standardization'
      chosen: true
    - option: 'Custom VPC visibility tooling'
      pros:
        - 'Tailored to Pinterest operational needs'
        - 'Integrates with existing observability stack'
      cons:
        - 'Build and maintain custom tooling'
      chosen: true
---

## Context

Pinterest's growth trajectory is ambitious: scaling toward a billion monthly active users. That scale of growth doesn't happen by accident—it requires infrastructure that's designed for it.

When I took on the Next-Gen Network Architecture initiative in Q4 2024, the goal was clear: build the foundational network infrastructure that would support Pinterest's next phase of growth. Not incremental improvements, but the architectural foundation that would carry the company for years.

## The Challenge

Three critical gaps needed addressing:

### IP Address Exhaustion Risk

Without proper IP address management, growth eventually hits a wall. VPCs get created, CIDR blocks get allocated, and eventually you run out of non-overlapping address space—or worse, you create overlaps that break connectivity.

Pinterest needed a systematic approach to IP allocation that would prevent exhaustion while supporting ~30% network growth.

### Uncontrolled Egress Costs

Every request that leaves AWS costs money. Without a centralized egress pattern, NAT Gateways proliferate across VPCs, each one adding to the bill. The costs weren't catastrophic, but they were growing faster than necessary.

### Limited Network Visibility

You can't manage what you can't see. Network configuration was spread across accounts and regions with no unified view. When issues arose, debugging meant piecing together information from multiple sources.

## The Solution

The initiative delivered five core components:

### AWS IPAM Implementation

I designed and implemented AWS IPAM (IP Address Management) across Pinterest's infrastructure:

- **Regional CIDR pools** with sufficient headroom for growth
- **Automated allocation** for new VPCs through Terraform modules
- **Utilization monitoring** to catch exhaustion risks early
- **Conflict prevention** through centralized allocation authority

This isn't glamorous work, but it's foundational. Without it, network growth eventually stops.

### Shared Network Design

At Pinterest's scale, VPCs become capacity—infrastructure that needs consistent patterns across hundreds of deployments:

- **Standardized VPC blueprints** encoding best practices for subnet layout, route tables, and security groups
- **Consistent CIDR sizing** based on workload profiles, preventing over-provisioning
- **Templated configurations** that teams adopt without needing deep networking expertise
- **Pattern library** documenting when to use which network topology

The patterns ensure every new VPC follows the same principles, reducing operational variance and making troubleshooting predictable.

### Centralized Network Hub Account

A single source of truth for network configuration across Pinterest's AWS organization:

- **Hub-and-spoke architecture** with the network account as the central control plane
- **Transit Gateway** connecting VPCs across accounts and regions
- **Centralized route management** eliminating distributed routing complexity
- **Unified view** of all network resources from one account

This consolidation transforms network operations from "find the right account" to "check the hub."

### Provisioning Automation

Terraform modules that encode network patterns as code:

- **Self-service VPC creation** through standardized modules
- **Guardrails built in** preventing common misconfigurations
- **Automatic integration** with IPAM, Transit Gateway, and monitoring
- **Version-controlled infrastructure** with clear upgrade paths

Teams request network resources; automation handles the details. The modules abstract complexity while enforcing standards.

### Centralized Egress Redesign

I led the redesign of egress architecture to consolidate outbound traffic:

- **Shared NAT Gateways** reducing per-VPC infrastructure costs
- **Consistent routing patterns** across the fleet
- **Centralized monitoring** for outbound traffic visibility
- **Projected $800K annual savings** from the consolidation

### VPC Visibility Tooling

I built tooling that provides operational insight into network configuration:

- **Fleet-wide VPC inventory** with configuration details
- **Peering and routing visualization**
- **Integration with Pinterest's observability stack**
- **Self-service debugging** for service teams

## Execution

The initiative ran from Q4 2024 through Q2 2025. We delivered one month ahead of schedule.

Key to the execution was treating this as foundational infrastructure, not a one-time project. Everything we built is designed to be the way Pinterest deploys network infrastructure going forward:

- Terraform modules that encode the patterns
- Centralized hub account that serves as the single pane of glass
- Documentation that explains the "why" not just the "how"
- Training sessions for engineers who will use these patterns

At Pinterest's scale, VPCs are capacity—you don't create them ad hoc, you provision them systematically. The hub account and provisioning automation make this systematic approach possible.

I also invested significant time in mentorship—ensuring the team could maintain and evolve this infrastructure independently.

## Results

- **Delivered one month ahead of schedule** — Q2 2025 completion
- **$800K projected annual savings** — From centralized egress alone
- **~30% network growth capacity** — Headroom for Pinterest's scaling
- **IP exhaustion risk eliminated** — Systematic allocation through IPAM
- **Hub account operational** — Single source of truth for network configuration
- **Self-service provisioning** — Teams can request infrastructure without networking expertise
- **Foundational patterns established** — This is now how Pinterest deploys infrastructure

## Key Learnings

**Foundation before features.** It's tempting to build visible features, but invisible infrastructure like IPAM prevents future crises. The best time to implement IP management is before you run out of addresses.

**Centralization has costs and benefits.** Centralized egress and hub accounts save money and improve visibility, but they also create dependencies. The design must account for both—providing the benefits of centralization while maintaining resilience.

**Patterns beat one-offs.** A well-designed pattern that teams can adopt is worth more than a dozen custom implementations. The shared network design ensures consistency across hundreds of VPCs without requiring every team to be networking experts.

**Automation encodes decisions.** When you build provisioning automation, you're not just saving time—you're encoding architectural decisions into code that enforces consistency. The Terraform modules contain the collective wisdom about how Pinterest networks should be built.

**Documentation is part of delivery.** Infrastructure without documentation is technical debt. We delivered patterns, not just infrastructure—and the patterns are documented well enough that others can use them correctly.

**Mentorship multiplies impact.** My contribution wasn't just the infrastructure I built, but the engineers I enabled to maintain and extend it.
