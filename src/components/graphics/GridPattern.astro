---
// Subtle grid pattern background for sections
interface Props {
  variant?: 'dots' | 'lines' | 'mesh';
  opacity?: number;
}

const { variant = 'dots', opacity = 0.5 } = Astro.props;
---

<div class:list={['grid-pattern', `grid-pattern--${variant}`]} style={`--pattern-opacity: ${opacity}`}>
  {variant === 'dots' && (
    <svg class="pattern-svg" aria-hidden="true">
      <defs>
        <pattern id="dot-pattern" x="0" y="0" width="24" height="24" patternUnits="userSpaceOnUse">
          <circle cx="2" cy="2" r="1" fill="currentColor" />
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#dot-pattern)" />
    </svg>
  )}

  {variant === 'lines' && (
    <svg class="pattern-svg" aria-hidden="true">
      <defs>
        <pattern id="line-pattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
          <path d="M0 40L40 0M-10 10L10 -10M30 50L50 30" stroke="currentColor" stroke-width="0.5" />
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#line-pattern)" />
    </svg>
  )}

  {variant === 'mesh' && (
    <svg class="pattern-svg" aria-hidden="true">
      <defs>
        <pattern id="mesh-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <path d="M60 0L0 60M60 60L0 0" stroke="currentColor" stroke-width="0.3" />
          <circle cx="30" cy="30" r="2" fill="currentColor" opacity="0.5" />
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#mesh-pattern)" />
    </svg>
  )}
</div>

<style>
  .grid-pattern {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    color: #e5e7eb;
    opacity: var(--pattern-opacity, 0.5);
  }

  .pattern-svg {
    width: 100%;
    height: 100%;
  }

  .grid-pattern--dots {
    mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
    -webkit-mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
  }

  .grid-pattern--lines {
    mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
  }

  .grid-pattern--mesh {
    mask-image: radial-gradient(ellipse at center, black 40%, transparent 80%);
    -webkit-mask-image: radial-gradient(ellipse at center, black 40%, transparent 80%);
  }
</style>
